
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Exploring software technologies">
    <title>Top 10 Unix Command Line Utilities 2011 - Coldflake Blog</title>
    <link rel="canonical" href="http://blog.coldflake.com/posts/bash-features-of-the-year">
    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/coldflake.css">
    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/css/syntax.css">
    <!-- Custom Fonts -->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Bitter:400,700,400italic|Ubuntu:400,500,700" rel="stylesheet" type="text/css">
    <!-- iconfonts -->
    <style type="text/css" media="screen, print">
        @font-face {
          font-family: 'icomoon';
          src:url('/fonts/icomoon.eot');
          src:url('/fonts/icomoon.eot?#iefix') format('embedded-opentype'),
            url('/fonts/icomoon.woff') format('woff'),
            url('/fonts/icomoon.ttf') format('truetype'),
            url('/fonts/icomoon.svg#icomoon') format('svg');
          font-weight: normal;
          font-style: normal;
        }
    </style>
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-21532991-3', 'auto');
      ga('require', 'displayfeatures');
      ga('send', 'pageview');
    </script>
</head>
<body>
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <!-- <a class="navbar&#45;brand" href="/">Coldflake Blog</a> -->
            <a class="navbar-brand" rel="home" href="/" title="home">
              <img style="max-width:120px; margin-top: -7px;" src="/img/mountainBackgroundWhite.png">
            </a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="/">Home</a>
                </li>
                  <li><a href="/about">About</a></li>
                  <li><a href="/tag">Tags</a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
    <!-- Post Header -->
<header class="intro-header" style="background-image: url('/img/wood_tools.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>Top 10 Unix Command Line Utilities 2011</h1>
                    <h2 class="subheading">A selection of the most useful bash commands I (re)-discovered this year.</h2>
                    <span class="meta">Posted on December 31, 2011
                      <i class="icon-tags"></i> 
                      <a href="/tag/unix">unix</a>, 
                      <a href="/tag/bash">bash</a>
                      .
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>
<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div id="tagpie">
            </div>
				<div class="table-of-contents">
<h3 id="content">Content</h3>
<ul>
  <li><a href="#diffing-two-folders">diffing folders</a></li>
  <li><a href="#manpages-for-a-specific-topic">find a manpage</a></li>
  <li><a href="#cutpaste">cut &amp; paste</a></li>
  <li><a href="#watch">watch</a></li>
  <li><a href="#du">du</a></li>
  <li><a href="#find">find</a></li>
  <li><a href="#seq-command">seq</a></li>
  <li><a href="#compiled-files">file &amp; nm</a></li>
  <li><a href="#dns-tools">host &amp; dig</a></li>
</ul>
</div>
<p>Whenever I find some useful command line utility I made it a habit to write it down so that I can
come back later in case I don’t remember. Turns out that it is quit a lot that I note.<br />
The following is a distilled version of my favorite ones from 2011 (in the meantime I did the same
thing for <a href="/posts/Top-10-Unix-Command-Line-Utilities-2012">2012</a> and <a href="/posts/top-10-unix-command-line-utilities-2013">2013</a>). For most of them I found examples somewhere on the net but
unfortunately didn’t not that information so I cannot refer back to the original source.</p>
<h2 id="diffing-two-folders">1&gt; diffing two folders</h2>
<p>The <code>diff</code> utility is usually used to compare two files line by line, but it can also be used in
other ways. Like this it’s very useful to quickly find out difference between folders:</p>
<pre class="terminal">
$ diff -rq folder1 folder2
</pre>
<p>This will compare the 2 folders and look at each directory recursively (<code>-r</code>). The <code>-q</code> option puts
it into brief mode so that the result is more easy to browse.</p>
<h2 id="manpages-for-a-specific-topic">2&gt; manpages for a specific topic</h2>
<p>Even though I use <code>man</code> all the time, I never knew that you can easily search all manpages with the
<code>-k</code> option. This is the result of searching in the manpages about “backup”:</p>
<pre class="terminal">
<span class="prompt">blog.coldflake.git</span>(master) &gt; man -k backup
dump(8), rdump(8)        - filesystem backup
restore(8), rrestore(8)  - restore files or file systems ...
tdbbackup(8)             - tool for backing up and for ...
registry(3)              - Store and backup key-value pairs
</pre>
<p><code>man -k</code> is actually just another form of calling <code>apropos</code> which searches in a database of
descriptions of system commands for our search term. Results are displayed on the standard output.</p>
<h2 id="cutpaste">3&gt; cut/paste</h2>
<p>I sometimes find it easier to use <code>cut</code> and <code>paste</code> instead of <code>awk</code> or <code>sed</code> for simple cases where
I needed to cut out selected portions of each line of a file or from the standard input and combine
them in a different way.</p>
<h3 id="count-loc-in-a-codebase">count loc in a codebase</h3>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">find -E . -regex <span class="s2">&quot;.*\.(cpp|c|h|hpp)&quot;</span> <span class="se">\</span>
  <span class="p">|</span> xargs -n1 wc -l <span class="se">\</span>
  <span class="p">|</span> cut -f1 -d<span class="s1">&#39;.&#39;</span> <span class="se">\</span>
  <span class="p">|</span> paste -sd+ - <span class="se">\</span>
  <span class="p">|</span> bc</code></pre></div>
<p>In this example I use the BSD version of <code>find</code> on Mac OS to retrieve a list of all source code
files. Next <code>wc -l</code> is used to count the number of lines of each file. What we now have is a list of
numbers that we want to add together. This is where <code>cut</code> and <code>paste</code> can help: We first cut out
only the number (<code>-f1</code> takes the first item of the tokens that where split using the delimiter <code>-d</code>
‘.’). Those number can then be combined using <code>paste</code> which reads from stdin (<code>-s</code>) and combines the
input tokens with + (<code>d+</code>).<br />
Finally everything is fed to <code>bc</code> that will do the calculation.</p>
<h2 id="watch">4&gt; watch</h2>
<p>A very useful utility that will run a command repeatedly. The output will be displayed. By default,
the program that it is told to execute will be run every 2 seconds. <code>watch</code> is kind of similar to
tail.</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">watch -n <span class="m">60</span> ls -l <span class="c"># will execute ls -l every minute</span></code></pre></div>
<p>Perhaps more interesting: Check your system cpu load repeatedly using <code>sar</code>:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">watch -n <span class="m">5</span> sar <span class="m">1</span> 1</code></pre></div>
<p>This will collect and display system activities statistics every 5 seconds.</p>
<h2 id="du">5&gt; du</h2>
<p>I despise most of the graphical file explorers and prefer never to have to leave the shell for
acquiring information about the system. A frequently occurring task for me is to display the size of
all files and folders in the current working directory. That is exactly what <code>du</code> was mad for…only
that the default output can be quite hard to read. So I found this solution that will print the
sizes of everything, sorted by size.</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">du -s ./* <span class="p">|</span> sort -n <span class="p">|</span> cut -f 2- <span class="p">|</span> xargs -Ix du -sh x</code></pre></div>
<p>This will first get the size of all items in the current directory and sort those according to their
block usage. Then it will drop the block size to only cut out the names (already sorted by size) and
rerun a <code>du</code> on those elements, this time using the “Human Readable” output. By the way, <code>du</code> is
smart enough to <em>not</em> do the calculation twice so this second round is pretty fast.<br />
Let’s do a quick test run:</p>
<pre class="terminal">
<span class="prompt">blog.coldflake.git</span>(master) &gt; du -s ./* | sort -n | cut -f 2- \
  | xargs -Ix du -sh x
412K	./code
624K	./images
1.3M	./_site
1.9M	./_cache
3.5M	./deploy
106M	./bin
</pre>
<h2 id="find">7&gt; find</h2>
<p><code>find</code> is a classic so I had to include it here.<br />
Ever tried to find files matching more than one pattern? There is a nice way you can tell <code>find</code> to do that: <code>-or</code></p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">find . -name <span class="s2">&quot;*.cpp&quot;</span> -or -name <span class="s2">&quot;*.h&quot;</span></code></pre></div>
<p>Here is another one: Want to mess with the timestamps and touch all files in directory recursively?</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">find . -exec touch <span class="o">{}</span> <span class="se">\;</span></code></pre></div>
<p>Or maybe find out which files that are found are actually executable?</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="k">for</span> n in <span class="sb">`</span>find . -type f<span class="sb">`</span><span class="p">;</span><span class="k">do</span> <span class="k">if</span> <span class="o">[</span> -x <span class="s2">&quot;$n&quot;</span> <span class="o">]</span><span class="p">;</span><span class="se">\</span>
	<span class="k">then</span> <span class="nb">echo</span> <span class="s2">&quot;executable:$n&quot;</span><span class="p">;</span><span class="k">fi</span><span class="p">;</span> <span class="k">done</span></code></pre></div>
<h2 id="seq-command">8&gt; seq command</h2>
<p>Was useful to me on some occasions:  <code>seq</code> for printing numbers. On Mac OS <code>seq</code> is not available
but <code>jot</code> can be used in a similar fashion.</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">seq <span class="m">5</span>       <span class="c"># prints numbers from 1 to 5</span>
seq <span class="m">5</span> <span class="m">10</span>    <span class="c"># print numbers from 5 to 10</span>
seq <span class="m">0</span> <span class="m">2</span> <span class="m">10</span>  <span class="c"># print even numbers from 0 to 10</span>
seq <span class="m">5</span> -1 <span class="m">1</span>  <span class="c"># print numbers from 5 down to 1</span></code></pre></div>
<p>I use it for example to generate files quickly:</p>
<pre class="terminal">
<span class="prompt">blog.coldflake.git</span>(master) &gt; touch $(seq -f &quot;test%02g&quot; 5)
&lt;span class=&quot;prompt&quot;&gt;blog.coldflake.git&lt;/span&gt;(master) &gt; ls
test01  test02  test03  test04  test05
</pre>
<h2 id="compiled-files">9&gt; Compiled Files</h2>
<p>The <code>file</code> utility can be used to identify the type of a file and is useful, among other cases, to
find out about the architecture for which a file was compiled.</p>
<pre class="terminal">
<span class="prompt">blog.coldflake.git</span>(master) &gt; file test.o
test.o: Mach-O 64-bit object x86_64
</pre>
<p><code>nm</code> is very useful to find out about the symbols listed in the symbol table of object-files and
libraries. It can be quite handy to search for the libraries that define a symbol:</p>
<pre class="terminal">
<span class="prompt">blog.coldflake.git</span>(master) &gt; nm -o /lib/* /usr/lib/* 2&gt; /dev/null | grep &#39;printf$&#39;
/usr/lib/dyld: 00007fff5fc1b3ef t ___simple_bprintf
/usr/lib/dyld: 00007fff5fc1bc54 t __simple_dprintf
/usr/lib/dyld: 00007fff5fc1bbe2 t __simple_vdprintf
/usr/lib/dyld: 00007fff5fc1bcf1 t __simple_vsprintf
/usr/lib/dyld: 00007fff5fc0a98b t _fprintf
...
</pre>
<h2 id="dns-tools">10&gt; DNS tools</h2>
<p>If you need some information regarding DNS those tools come in handy. <code>host</code> is a simple utility for performing DNS lookups. </p>
<pre class="terminal">
<span class="prompt">blog.coldflake.git</span>(master) &gt; host coldflake.com
coldflake.com has address 173.230.139.188
coldflake.com mail is handled by 10 mail.coldflake.com.
</pre>
<p><code>dig</code> (domain information groper) can be used for interrogating DNS name servers. For example you
can use it to retrieve a list of DNS servers authoritative for a domain:</p>
<pre class="terminal">
<span class="prompt">blog.coldflake.git</span>(master) &gt; dig coldflake.com NS +noall +answer
; &lt;&lt;&gt;&gt; DiG 9.6-ESV-R4-P3 &lt;&lt;&gt;&gt; coldflake.com NS +noall +answer
;; global options: +cmd
coldflake.com.		83707	IN	NS	ns3.linode.com.
coldflake.com.		83707	IN	NS	ns4.linode.com.
coldflake.com.		83707	IN	NS	ns5.linode.com.
coldflake.com.		83707	IN	NS	ns1.linode.com.
coldflake.com.		83707	IN	NS	ns2.linode.com.
</pre>
              <hr>
              <small>title-image by <a href="https://www.flickr.com/photos/mamaol/">Marco Ferracuti</a> (<a href="https://creativecommons.org/licenses/by-nc-nd/2.0/">license</a>)</small>
                <hr>
                <ul class="pager">
                    <li class="previous">
                    <a href="/posts/tumblr-no-more" data-toggle="tooltip" data-placement="top" title="Good Bye Tumblr - Welcome Hakyll"><i class="fa fa-arrow-left"></i> Older</a>
                    </li>
                    <li class="next">
                    <a href="/posts/On-the-fly-C++" data-toggle="tooltip" data-placement="top" title="On-The-Fly C++">Newer <i class="fa fa-arrow-right"></i></a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</article>
<hr>
<script src="/js/d3.min.js"></script>
<script src="/js/tagpie.js"></script>
<script>
  render("tag_ratio.json","#tagpie", 600, 200);
</script>
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <li>
                      <a href="/about" title="About">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-user fa-stack-1x fa-inverse"></i>
                            </span>
                      </a>
                    </li>
                    <li>
                        <a href="/feed.xml">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="https://twitter.com/marcontwit">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/marcmo">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github-alt fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    <li>
                      <a href="mailto:&#111;&#108;&#105;&#118;&#101;&#114;&#046;&#109;&#117;&#101;&#108;&#108;&#101;&#114;&#064;&#103;&#109;&#097;&#105;&#108;&#046;&#099;&#111;&#109;" title="drop me a line">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                      </a>
                    </li>
                </ul>
                <p class="copyright text-muted">Copyright &copy; Coldflake Blog 2014
            </div>
        </div>
    </div>
</footer>
<!-- jQuery -->
<script src="/js/jquery.min.js "></script>
<script src="/js/moment.min.js "></script>
<script src="/js/livestamp.min.js "></script>
<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js "></script>
</body>
</html>

