
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Exploring software technologies">
    <title>The Incredible Brew - Coldflake Blog</title>
    <link rel="canonical" href="http://blog.coldflake.com/posts/The-Incredible-Brew">
    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/coldflake.css">
    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/css/syntax.css">
    <!-- Custom Fonts -->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Bitter:400,700,400italic|Ubuntu:400,500,700" rel="stylesheet" type="text/css">
    <!-- iconfonts -->
    <style type="text/css" media="screen, print">
        @font-face {
          font-family: 'icomoon';
          src:url('/fonts/icomoon.eot');
          src:url('/fonts/icomoon.eot?#iefix') format('embedded-opentype'),
            url('/fonts/icomoon.woff') format('woff'),
            url('/fonts/icomoon.ttf') format('truetype'),
            url('/fonts/icomoon.svg#icomoon') format('svg');
          font-weight: normal;
          font-style: normal;
        }
    </style>
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-21532991-3', 'auto');
      ga('require', 'displayfeatures');
      ga('send', 'pageview');
    </script>
</head>
<body>
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <!-- <a class="navbar&#45;brand" href="/">Coldflake Blog</a> -->
            <a class="navbar-brand" rel="home" href="/" title="home">
              <img style="max-width:120px; margin-top: -7px;" src="/img/mountainBackgroundWhite.png">
            </a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="/">Home</a>
                </li>
                  <li><a href="/about">About</a></li>
                  <li><a href="/tag">Tags</a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
    <!-- Post Header -->
<header class="intro-header" style="background-image: url('/img/rusty-cog.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>The Incredible Brew</h1>
                    <h2 class="subheading">The missing package manager for OS X which solves a lot of headaches.</h2>
                    <span class="meta">Posted on December 7, 2013
                      <i class="icon-tags"></i> 
                      <a href="/tag/unix">unix</a>, 
                      <a href="/tag/osx">osx</a>, 
                      <a href="/tag/tool">tool</a>, 
                      <a href="/tag/git">git</a>, 
                      <a href="/tag/ruby">ruby</a>, 
                      <a href="/tag/bash">bash</a>
                      .
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>
<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div id="tagpie">
            </div>
				<p>When Apple started shipping the first iBooks including Mac OS X back in 2001 I was hooked. A
beautiful and well design user interface sitting on top of a developer friendly operation system.
More importantly: a <em>unix</em> based OS where most of the unix tools you know and love are available.
But porting some linux based utility to Mac Os was now possible albeit quite hairy in some cases.
Dealing with the dependencies and taking care that versions are compatible gets ungainly pretty
quick.</p>
<h2 id="package-management-systems">Package Management Systems</h2>
<p>And of course there where others that stepped up and created whole package management systems:
<a href="http://fink.thetis.ig42.org">fink</a> and <a href="http://www.macports.org">MacPorts</a> (formerly DarwinPorts) where the first contenders. While this ameliorated the
whole situation considerably I still couldn’t quite warm up to those solutions. Both systems decided
it was best to not rely on any library that come with OS X but rather include everything in the
dependency-tree. That for sure does guarantee the best possible compatibility but it also means
build times will increase dramatically. MacPorts was long my favorite solution and over time I
assembled quite a fair share of compiled libraries. So much that you will avoid rebuilding at all
costs. If for some reason your dependencies are messed up and you’d like to restart…you won’t do
it.</p>
<h2 id="i-classfa-fa-flaski-homebrew-to-the-rescue"><i class="fa fa-flask"></i> Homebrew to the Rescue</h2>
<p><a href="http://brew.sh">Homebrew</a> takes a radically different approach: reuse existing Mac OS libraries and stay as
lightweight as possible. Everything about homebrew has a modern feel to it, from the homepage over
the way they keep all package information in a git-repository to the super easy formula (that’s what
they call their packages) definitions in ruby. It has a <em>very</em> active user community and since
development is done on <a href="http://github.com/mxcl/homebrew">github</a>, it’s quite easy to follow along and participate.<br />
The usual stuff works as expected:</p>
<ul>
  <li><code>brew update</code> – update the formulae and Homebrew itself</li>
  <li><code>brew outdated</code> – now find out what is outdated</li>
  <li><code>brew upgrade</code> – Upgrade everything</li>
  <li><code>brew upgrade $FORMULA</code> – upgrade a specific formula</li>
  <li><code>brew search /.*tk$/</code> – search for available formula</li>
  <li><code>brew info $FORMULA</code> – provides a little more info about a formula</li>
</ul>
<pre class="terminal">
<span class="prompt">tmp</span> &gt; brew info aubio
    aubio: stable 0.3.2
    http://aubio.org/
    Not installed
    From: https://github.com/mxcl/homebrew/commits/master/Library/Formula/aubio.rb
    ==&gt; Dependencies
    Build: pkg-config ✔, libtool ✔, swig ✘
    Required: fftw ✘, libsamplerate ✘, libsndfile ✘
    ...
</pre>
<p>The <code>search</code> command can be used with regular expressions if the search term is surrounded with
slashes. A lesser known brew way to search for packages/formulae is to use <code>brew server</code>. This
requires that <a href="http://www.sinatrarb.com/">sinatra</a> is available on the system and provides a website for the search.</p>
<p><img class="img-responsive" src="/img/brew/homebrew.png" alt="" /></p>
<p>Of course you can always look up a package online as e.g. on <a href="http://braumeister.org/">braumeister</a>. And if you need a
package that is not yet part of homebrew, it can easily be created. All it takes is to locate the
sources on the web and call <code>brew create</code> with this link. homebrew will create a basic formula (== a
ruby script) that you can either just use or tweak manually of some special configure options are
needed. Since all formulae are kept in a git repository, it’s no problem to create your own packages
and still keep up to date with homebrew.  In fact, it’s so easy to modify a formula and <a href="https://github.com/mxcl/homebrew/wiki/Formula-Cookbook#commit">have it
added to the official</a> repository that a lot of people are contributing to keep everything up to
date and grow the pool of available formulae constantly.</p>
<h2 id="warm-and-fuzzy">Warm and Fuzzy</h2>
<p>Good package managing systems have one area that is crucial in the long run: help to maintain a tidy
system. An area where brew really shines is dependency tracking. To find out if it’s gonna be a
quick install or quite a beast just take a look at the dependencies a formula has:</p>
<pre class="terminal">
<span class="prompt">tmp</span> &gt; brew deps cairo --tree
cairo
|- xz
|- pkg-config
|- freetype
|  |- libpng
|- fontconfig
|  |- pkg-config
|  |- freetype
|  |  |- libpng
...
</pre>
<p>To maintain a sleek and tidy brew installation you can easily get rid of installed formulae. Here
it’s quite handy to do a reverse dependency lookup before:</p>
<pre class="terminal">
<span class="prompt">tmp</span> &gt; brew uses --recursive readline
abcl			geocouch		...
abook			ginac			...
...
</pre>
<p>Once you decide what to get rid of, it just takes a <code>brew uninstall</code> or a <code>brew rm</code>. To make sure
nothing unimportant remains in your system, <code>brew prune</code> will remove dead symlinks and <code>brew cleanup
-s</code> will remove older versions and all downloads.<br />
Brew also comes with some extremely useful checks. The <code>brew doctor</code> makes sure you are in good shape and gives you good advice.</p>
<pre class="terminal">
<span class="prompt">tmp</span> &gt; brew doctor
Warning: Your XQuartz (2.7.4) is outdated
Please install XQuartz 2.7.5:
  https://xquartz.macosforge.org
Warning: Some installed formula are missing dependencies.
You should `brew install` the missing dependencies:
    brew install libffi
Run `brew missing` for more details.
...
</pre>
<p>It tremendously helps to clean up and allows you to keep your peace of conscience. And <code>brew
missing</code> of course shows you all formulae you still need to install.</p>
<h2 id="absolutely-happy">Absolutely Happy</h2>
<p>When I found out about brew a couple of years back, I was thrilled by it’s simplicity and the basic
concepts behind brew. Today after having used brew on multiple OS versions and machines, brew is one
of the first things to install. So far it never failed me and watching brew install a formula
including all necessary dependencies is almost a calming experience. Looking forward to a lot of
future installs!</p>
<p><img class="img-responsive" src="/img/brew/cheers.png" alt="" /></p>
<p><small>image: <cite>Cheers</cite> designed by <a href="http://thenounproject.com/RyanBeck">Ryan Beck</a>, both from the <a href="http://creativecommons.org/publicdomain/zero/1.0/deed.en">Noun Project</a></small></p>
                <hr>
                <ul class="pager">
                    <li class="previous">
                    <a href="/posts/Simple-Networking" data-toggle="tooltip" data-placement="top" title="Simple Networking"><i class="fa fa-arrow-left"></i> Older</a>
                    </li>
                    <li class="next">
                    <a href="/posts/top-10-unix-command-line-utilities-2013" data-toggle="tooltip" data-placement="top" title="Top 10 Unix Command Line Utilities 2013">Newer <i class="fa fa-arrow-right"></i></a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</article>
<hr>
<script src="/js/d3.min.js"></script>
<script src="/js/tagpie.js"></script>
<script>
  render("tag_ratio.json","#tagpie", 600, 200);
</script>
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <li>
                      <a href="/about" title="About">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-user fa-stack-1x fa-inverse"></i>
                            </span>
                      </a>
                    </li>
                    <li>
                        <a href="/feed.xml">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="https://twitter.com/marcontwit">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/marcmo">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github-alt fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    <li>
                      <a href="mailto:&#111;&#108;&#105;&#118;&#101;&#114;&#046;&#109;&#117;&#101;&#108;&#108;&#101;&#114;&#064;&#103;&#109;&#097;&#105;&#108;&#046;&#099;&#111;&#109;" title="drop me a line">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                      </a>
                    </li>
                </ul>
                <p class="copyright text-muted">Copyright &copy; Coldflake Blog 2015
            </div>
        </div>
    </div>
</footer>
<!-- jQuery -->
<script src="/js/jquery.min.js "></script>
<script src="/js/jquery.timeago.js "></script>
<script>
jQuery(document).ready(function() {
  jQuery("span.timeago").timeago();
});
</script>
<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js "></script>
</body>
</html>

